"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return t=Object.assign||function(t){for(var i,e=1,o=arguments.length;e<o;e++)for(var n in i=arguments[e])Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);return t},t.apply(this,arguments)};function i(t,i){var e=performance.now(),o={};return o.value=requestAnimationFrame((function n(){performance.now()-e>=i?t():o.value=requestAnimationFrame(n)})),o}function e(t,i,e,o){return function(n){return Math.pow(1-n,3)*t+3*Math.pow(1-n,2)*n*i+3*(1-n)*Math.pow(n,2)*e+Math.pow(n,3)*o}}function o(t,i){var e=Math.PI-i*Math.PI/180;return{x:t*Math.sin(e),y:t*Math.cos(e)}}var n=function(){function n(i){if(this.leftTopOffset=50,this.maxEasing=1,this.isAnimating=!1,this.isDisposed=!1,!i.container)throw new Error("Container element not found. Make sure container is initialized before creating Gauge");if(!i.colors&&!i.color)throw new Error("Color is not specified. Use `color` or `colors` property to specify the color");var o=this.createRootSvgElement();i.container.appendChild(o),this.root=o;var n=void 0===i.fromAngle?220:i.fromAngle,r=void 0===i.toAngle?500:i.toAngle,a=i.animationDuration;this.config=t(t({},i),{fromAngle:n,toAngle:r,easing:i.easing||e(0,0,.2,1),lineWidth:i.lineWidth||3.5,gaugeRadius:i.gaugeRadius||35,animationDelay:i.animationDelay||0,animationDuration:void 0===a?600:a,colors:i.colors||Array(r-n).fill(i.color)})}return n.prototype.createRootSvgElement=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox","0 0 100 100"),t.style.position="absolute",t},n.prototype.getAnimation=function(t){return{easing:t.easing||this.config.easing,animationDelay:void 0===t.animationDelay?this.config.animationDelay:t.animationDelay,animationDuration:void 0===t.animationDuration?this.config.animationDuration:t.animationDuration}},n.prototype.setValue=function(t,e){var o=this;if(void 0===e&&(e={}),this.isDisposed||this.isAnimating)return Promise.resolve();var n=this.config,r=n.fromAngle,a=n.toAngle,s=this.getAnimation(e),l=s.easing,c=s.animationDuration,u=s.animationDelay,f=a-r;t>f&&(t=f);var g=c>0,h=t-this.root.childNodes.length;if(0===h)return Promise.resolve();if(this.isAnimating=!0,h<0)return new Promise((function(t){var e=Array.from(o.root.childNodes).slice(h).reverse();e.forEach((function(n,r){if(o.isDisposed)t();else{var a=r*o.maxEasing/e.length,s=g?l(a)*c:0;i((function(){o.root.removeChild(n),r===Math.floor(Math.abs(h))-1&&(o.isAnimating=!1,t())}),u+s)}}))}));var p=this.root.childNodes.length,m=0,d=p,v=r+p+h,A=this.maxEasing/(v-(r+p));return new Promise((function(t){for(var e=function(e){if(o.isDisposed)return t(),"break";i((function(){o.renderCircle(e,d++),e===Math.floor(v)-1&&(o.isAnimating=!1,t())}),(g?l(A*m)*c:0)+u),m++},n=r+p;n<v;n++){if("break"===e(n))break}}))},n.prototype.insertAdjacentToRoot=function(t,i){this.config.container.insertAdjacentHTML(t,i)},n.prototype.getElementAtValue=function(t){var i=this.root.childNodes[t];if(!i)throw new Error("Element with value ".concat(t," not found"));var e=i.dataset.angle;if(void 0===e)throw new Error("Data attribute angle not found");var o=i.getBoundingClientRect(),n=this.root.getBoundingClientRect();return{element:i,metadata:{relativeLeft:o.left-n.left,relativeTop:o.top-n.top,angle:parseFloat(e)}}},n.prototype.renderCircle=function(t,i){var e=document.createElementNS("http://www.w3.org/2000/svg","circle"),n=this.config.colors[i],r=o(this.config.gaugeRadius,t),a=r.x,s=r.y;e.setAttribute("cx",(this.leftTopOffset+a).toString()),e.setAttribute("cy",(this.leftTopOffset+s).toString()),e.setAttribute("r",this.config.lineWidth.toString()),e.setAttribute("data-angle",t.toString()),e.setAttribute("fill",n),this.root.appendChild(e)},n.prototype.dispose=function(){this.isDisposed=!0,this.isAnimating=!1},n}();exports.Gauge=n,exports.calcCoordinatesFromAngle=o,exports.cubicBezier=e;
//# sourceMappingURL=index.js.map
